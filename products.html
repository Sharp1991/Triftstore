<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thrift Sixteen Products</title>
<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/fontawesome.css">
<link rel="stylesheet" href="assets/css/templatemo-sixteen.css">
<link rel="stylesheet" href="assets/css/owl.css">
<style>
  .product-frame {
    width: 100%;
    height: 300px; /* consistent frame height */
    overflow: hidden;
    position: relative;
  }

  .product-frame img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .slider-dots {
    text-align: center;
    margin-top: 8px;
  }

  .slider-dots span {
    display: inline-block;
    width: 8px;
    height: 8px;
    background: #ccc;
    border-radius: 50%;
    margin: 0 4px;
    cursor: pointer;
  }

  .slider-dots span.active {
    background: #ff6600;
  }

  .pages {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 30px;
    margin-bottom: 50px;
    padding: 0;
  }

  .pages li { list-style: none; }
  .pages li a {
    display: inline-block;
    padding: 8px 14px;
    background: #f4f4f4;
    color: #333;
    border-radius: 6px;
    text-decoration: none;
    transition: background 0.3s;
  }
  .pages li a:hover, .pages li a.active { background: #ff6600; color: #fff; }
</style>
</head>
<body>

<header>
<nav class="navbar navbar-expand-lg">
<div class="container">
<a class="navbar-brand" href="index.html"><h2>Thrift <em>Sixteen</em></h2></a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarResponsive">
<ul class="navbar-nav ml-auto">
<li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
<li class="nav-item active"><a class="nav-link" href="products.html">Our Products</a></li>
<li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
<li class="nav-item"><a class="nav-link" href="contact.html">Contact Us</a></li>
</ul>
</div>
</div>
</nav>
</header>

<div class="page-heading products-heading header-text">
<div class="container">
<div class="row">
<div class="col-md-12">
<div class="text-content">
<h4>New Arrivals</h4>
<h2>Thrift Sixteen Products</h2>
</div>
</div>
</div>
</div>
</div>

<div class="products">
<div class="container">
<div class="row">
<div class="col-md-12">
<div class="filters">
<ul>
<li class="active" data-filter="*">All Products</li>
<li data-filter=".des">Featured</li>
<li data-filter=".dev">Flash Deals</li>
<li data-filter=".gra">Last Minute</li>
</ul>
</div>
</div>
<div class="col-md-12">
<div class="filters-content">
<div class="row grid" id="product-list">
<!-- Products will load here dynamically from Google Sheet -->
</div>
</div>
</div>
<div class="col-md-12 text-center">
<ul class="pages" id="pagination"></ul>
</div>
</div>
</div>
</div>

<footer>
<div class="container">
<div class="row">
<div class="col-md-12">
<div class="inner-content">
<p>Copyright &copy; 2025 Thrift Sixteen Co., Ltd. - Design: 
<a rel="nofollow noopener" href="https://templatemo.com" target="_blank">TemplateMo</a></p>
</div>
</div>
</div>
</div>
</footer>

<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<script>
const sheetAPI = "https://api.sheetbest.com/sheets/463f1150-f334-4c7b-ab9c-6b71829d01f9";
let products = [];
let currentPage = 1;
const productsPerPage = 6;

function fetchProducts() {
  fetch(sheetAPI)
    .then(res => res.json())
    .then(data => {
      products = data;
      renderProducts(currentPage, "*");
    });
}

function renderPagination(totalPages) {
  const pagination = document.getElementById("pagination");
  pagination.innerHTML = "";
  for (let i = 1; i <= totalPages; i++) {
    const li = document.createElement("li");
    const a = document.createElement("a");
    a.href = "#";
    a.textContent = i;
    if (i === currentPage) a.classList.add("active");
    a.addEventListener("click", (e) => {
      e.preventDefault();
      currentPage = i;
      renderProducts(currentPage, getActiveFilter());
    });
    li.appendChild(a);
    pagination.appendChild(li);
  }
}

function renderProducts(page, filter) {
  const list = document.getElementById("product-list");
  list.innerHTML = "";

  let filtered = products.filter(
    (p) => filter === "*" || (p.category && p.category === filter.substring(1))
  );

  const start = (page - 1) * productsPerPage;
  const end = start + productsPerPage;
  const pageProducts = filtered.slice(start, end);

  pageProducts.forEach((p, idx) => {
    const div = document.createElement("div");
    div.className = "col-lg-4 col-md-4 all " + (p.category || "");

    // Prepare images array
    const imgs = p.images.split(",").map(i => i.trim());
    let imgSlides = "";
    imgs.forEach((img, i) => {
      imgSlides += `<img src="${img}" alt="${p.name}" style="display:${i===0?'block':'none'}">`;
    });

    div.innerHTML = `
      <div class="product-item">
        <div class="product-frame" id="frame-${page}-${idx}">
          ${imgSlides}
        </div>
        <div class="slider-dots" id="dots-${page}-${idx}"></div>
        <div class="down-content">
          <h4>${p.name}</h4>
          <h6>â‚¹${p.price}</h6>
          <p>${p.description}</p>
          <a href="${p['whatsapp link']}" target="_blank" class="btn btn-success">Buy on WhatsApp</a>
        </div>
      </div>
    `;
    list.appendChild(div);

    // Initialize slider
    const frame = div.querySelector(`#frame-${page}-${idx}`);
    const dotsContainer = div.querySelector(`#dots-${page}-${idx}`);
    let currentImg = 0;

    function updateSlider() {
      imgs.forEach((_, i) => {
        frame.children[i].style.display = i === currentImg ? "block" : "none";
        dotsContainer.children[i].classList.toggle("active", i === currentImg);
      });
    }

    imgs.forEach((_, i) => {
      const dot = document.createElement("span");
      dot.addEventListener("click", () => {
        currentImg = i;
        updateSlider();
      });
      dotsContainer.appendChild(dot);
    });

    updateSlider();
  });

  const totalPages = Math.ceil(filtered.length / productsPerPage);
  renderPagination(totalPages);
}

function getActiveFilter() {
  return document.querySelector(".filters li.active").getAttribute("data-filter");
}

// Filter clicks
document.querySelectorAll(".filters li").forEach(li => {
  li.addEventListener("click", () => {
    document.querySelectorAll(".filters li").forEach(el => el.classList.remove("active"));
    li.classList.add("active");
    currentPage = 1;
    renderProducts(currentPage, getActiveFilter());
  });
});

fetchProducts();
</script>

</body>
</html>
